{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="{% static 'mo/styles.css' %}"  media="screen">
    <!-- <link rel="stylesheet" type="text/css" href="{% static 'mo/main.css' %}">  -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <!-- <script type="text/javascript" src="{% static 'jquery-3.4.1.min.js' %}"></script> -->
    <script type='text/javascript' src='https://prod-uk-a.online.tableau.com/javascripts/api/viz_v1.js'></script>
    <script type="text/javascript" src="{% static 'celery_progress/celery_progress.js' %}"></script>
    <script type="text/javascript" src="{% static 'mo/hallo.js' %}"></script>
    <title>DSP</title>
    <script>
        $(document).ready(function(){
            $("#myTab a").click(function(e){
                e.preventDefault();
                $(this).tab("show");
            });
        });
    </script>
</head>
<body>
    
    <div class="container">
        <div class="row p-5">
            <ul class="nav nav-tabs nav-fill" id="myTab">
                <li class="nav-item" role="presentation">
                    <a href="#home" class="nav-link active" role="tab">Home</a>
                </li>
                <li class="nav-item" role="presentation">
                    <a href="#analysis1" class="nav-link" role="tab">Analyse 1</a>
                </li>
                <li class="nav-item" role="presentation">
                    <a href="#analysis2" class="nav-link" role="tab">Analyse 2</a>
                </li>
                <li class="nav-item" role="presentation">
                    <a href="#scraper" class="nav-link" role="tab">Courtcase scraper</a>
                </li>
                <li class="nav-item" role="presentation">
                    <a href="#form" class="nav-link" role="tab">Form</a>
                </li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane fade show active" id="home">
                    <div class="rounded bg-soft p-5">
                        <h3>Data system architecture -- High-level overview</h3>
                        <img src="{% static 'mo/tool_architecture.jpg' %}" class='full-width'>
                        <br>
                        <h5></h5>
                        <p></p>
                    </div>
                </div>
                <div class="tab-pane fade" id="analysis1">
                    <div class="rounded bg-soft p-5">
                        <div class='tableauPlaceholder' id='viz1643947211576' style='position: relative'>
                            <object class='tableauViz'  style='display:none;'>
                                <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> 
                                <param name='embed_code_version' value='3' /> 
                                <param name='site_root' value='' />
                                <param name='name' value='F6-Workbook-DSP&#47;Dashboard1' />
                                <param name='tabs' value='no' /><param name='toolbar' value='yes' />
                                <param name='animate_transition' value='yes' />
                                <param name='display_static_image' value='yes' />
                                <param name='display_spinner' value='yes' />
                                <param name='display_overlay' value='yes' />
                                <param name='display_count' value='yes' />
                                <param name='language' value='en-US' />
                                <param name='filter' value='publish=yes' />
                            </object>
                        </div>                
                        <script type='text/javascript'>                    
                            var divElement = document.getElementById('viz1643947211576');                    
                            var vizElement = divElement.getElementsByTagName('object')[0];                    
                            if ( divElement.offsetWidth > 800 ) { vizElement.style.width='100%';vizElement.style.height=(divElement.offsetWidth*0.75)+'px';} else if
                            ( divElement.offsetWidth > 500 ) { vizElement.style.width='100%';vizElement.style.height=(divElement.offsetWidth*0.75)+'px';} 
                            else { vizElement.style.width='100%';vizElement.style.height='1577px';}                     
                            var scriptElement = document.createElement('script');                    
                            scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    
                            vizElement.parentNode.insertBefore(scriptElement, vizElement);                
                         </script> 
                    </div>
                </div>
                <div class="tab-pane fade" id="analysis2">
                    <div class="rounded bg-soft p-5">
                        <div class='tableauPlaceholder' id='viz1643947571581' style='position: relative'>
                            <object class='tableauViz'  style='display:none;'>
                                <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> 
                                <param name='embed_code_version' value='3' /> 
                                <param name='site_root' value='' />
                                <param name='name' value='F6-Workbook-DSP-2&#47;Dashboard2' />
                                <param name='tabs' value='no' />
                                <param name='toolbar' value='yes' />
                                <param name='animate_transition' value='yes' />
                                <param name='display_static_image' value='yes' />
                                <param name='display_spinner' value='yes' />
                                <param name='display_overlay' value='yes' />
                                <param name='display_count' value='yes' />
                                <param name='language' value='en-US' />
                                <param name='filter' value='publish=yes' />
                            </object>
                        </div>                
                        <script type='text/javascript'>                    
                            var divElement = document.getElementById('viz1643947571581');                    
                            var vizElement = divElement.getElementsByTagName('object')[0];                    
                            if ( divElement.offsetWidth > 800 ) { vizElement.style.width='100%';vizElement.style.height=(divElement.offsetWidth*0.75)+'px';} 
                            else if ( divElement.offsetWidth > 500 ) { vizElement.style.width='100%';vizElement.style.height=(divElement.offsetWidth*0.75)+'px';} 
                            else { vizElement.style.width='100%';vizElement.style.height='1827px';}                     
                            var scriptElement = document.createElement('script');                    
                            scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    
                            vizElement.parentNode.insertBefore(scriptElement, vizElement);
                        </script> 
                    </div>
                </div>
                <div class="tab-pane fade" id="scraper">
                    <div class="rounded bg-soft p-5">
                        <h3>Welcome to the Court Data Scraper</h3>
                        <p>By starting the scraper the uitspraken API will be queried for new data. This data will be preprocessed and
                           stored in the proper format. Finally, the data will be pushed to the database which can then be used for further analyses.    
                        </p>
                        <button class="btn btn-lg btn-dark" id="scrape-btn">Start scraping</button>
                        <div class="space-above">
                            <div class='progress-wrapper'>
                                <div id='progress-bar' class='progress-bar rounded' style="width: 0%;"></div>
                                <h6 id="progress-bar-message"></h6>
                            </div>
                        </div>
                        <h4 id="celery-result"></h4>
                    </div>
                </div>
                <div class="tab-pane fade" id="form">
                    <div class="rounded bg-soft p-5">
                        <h3>Upload files here.</h3>
                        <hr>
                        {% if uploaded_file_url %}
                            <div class="row mb-3">
                                <figure class="figure">
                                    <figcaption class="figure-caption">
                                        <p>File uploaded at: {{ uploaded_file_url }}</p>
                                    </figcaption>
                                </figure>
                            </div>
                            <div class="row mb-3">
                                <a href="{% url 'index' %}">
                                    <button type="button" class="btn btn-dark">Ga terug</button>
                                </a>
                            </div>
                        {% else %}
                            <form method="post" action="{% url 'upload' %}" class="d-flex flex-column" enctype="multipart/form-data">
                                {% csrf_token %}
                                <div class="input-group mb-3 d-flex flex-row">
                                    <input type="text" name="title" class="form-control" placeholder="Title">
                                    <input type="text" name="case_nr" class="form-control" placeholder="Case nr">
                                </div>
                                <div class="input-group mb-3">
                                    <select name="crime_type" class="form-select" id="inputGroupSelect02">
                                        <option selected>Crime type</option>
                                        <option value="Burglary">Burglary</option>
                                        <option value="Domestic violence">Domestic violence</option>
                                        <option value="Fraud and scams">Fraud and scams</option>
                                        <option value="Homicide">Homicide</option>
                                        <option value="Sexual assault">Sexual assault</option>
                                        <option value="Robbery">Robbery</option>
                                        <option value="Drug-related">Drug-related</option>
                                    </select>
                                </div>
                                <div class="input-group mb-3">
                                    <textarea name="description" class="form-control" placeholder="Type description here..."></textarea>
                                </div>
                                <div class="input-group mb-3">
                                    <input type="file" name="file" class="form-control" id="inputGroupFile02">
                                </div>
                                <div class="mb-3">
                                    <button class="btn btn-lg btn-dark" type="submit">Upload</button>
                                </div>
                            </form>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>
</html>